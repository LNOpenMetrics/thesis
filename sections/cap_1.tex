\setcounter{page}{1}

\chapter{Lightning Network}

\newcommand{\noteOnBitcoinNaming}[0]{
    \footnote{
        From now till the end of the document we will use the word Bitcoin Protocol and
        Bitcoin with capitalized for identify the protocol, and the word bitcoin not capitalized to identify the currency
    }
}

\newcommand{\noteOnCLNImpl}[0]{
    \footnote{
    core lightning is one of the main implementation today, and it is available at
    \href{https://github.com/ElementsProject/lightning}{https://github.com/ElementsProject/lightning}
    }
}



\section{Introduction}

The \emph{Lightning Network} is a peer-to-peer protocol that propose a scalable solution for Bitcoin\noteOnBitcoinNaming where one
of the goal of the proposal is to be able to execute micro transaction with it.
In fact, Bitcoin does not scale for a sequence of reason, and one of them is the number of
maximum rate transaction that the network can process.\\
Therefore, with the awareness that some of these limitation that are feature in Bitcoin, the lightning network try to solve
the scalability problem by offer an \emph{off-chain} solution that enable peers to exchange partial
signed transaction without violate the Bitcoin rules.\\
Lightning Network is proposed for the first time in the 2015 in a draft paper \cite{lightning-network-paper},
and then implemented in the 2018 with the \emph{c-lightning}\noteOnCLNImpl (aka \emph{core lightning}) implementation.
However, the protocol is evolving over the years by a process of standardization\cite{lightning-bolts}, and the paper is considered
only a written idea on how to build an off-chain solution without any definition of the current protocol state machine.

\section{Off-Chain Protocol}

The Bitcoin network has scalability problem in confront of the modern payment system that the people use daily.
In particular, these problems are related to the space required by the blockchain to store each transaction,
and the relative long time that is required to consider a transaction confirmed in the blockchain.

In fact, the payment network Visa achieved around 65,000\cite{visa-sheet} transactions per second, and currently,
Bitcoin supports around 7 transactions per second with a required space estimated of 1 megabyte per block. Considering,
an average of 300 bytes per bitcoin transaction and assumed unlimited block sizes, the space for store the same number
of transactions is estimated in the order of terabytes\cite{lightning-network-paper}.

Therefore, in order to use the Bitcoin protocol as an alternative of the current system for a subset of
problem, such as the accessibility to the modern world to people that live in not developed places (e.g Africa),
there is the need to scale the protocol.

This kind of problem is almost considered a well studied problem, and different solution are given in different
way, that most of the time required a hard fork (See Section \ref{sec:hard_vs_soft} for the definition of hard fork) of the protocol itself.
One of the most popular hard fork example is given by the Bitcoin Cash that increase the block size to be able to insert
inside a block more transaction.
However, in the Bitcoin ecosystem (based on the Bitcoin Core implementation) the idea of a hard fork is considered an
end of choice alternative, and some of the idea to solve the scalability of the protocol are proposed through Bitcoin Script trick
that sometimes required a soft fork in the base protocol itsef.

\section{Lightning Network Communication Protocol}
How the nodes talks, and how the transactions are propagated.

\section{Lightning Network Possible Evolution}
eltoo
